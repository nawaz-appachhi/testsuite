package com.myntra.apiTests.erpservices.oms.dp;

import com.myntra.apiTests.end2end.End2EndHelper;
import com.myntra.apiTests.erpservices.atp.ATPServiceHelper;
import com.myntra.apiTests.erpservices.bounty.BountyServiceHelper;
import com.myntra.apiTests.erpservices.ims.IMSServiceHelper;
import com.myntra.apiTests.erpservices.oms.OMSServiceHelper;
import com.myntra.apiTests.erpservices.oms.Test.OMSTCConstants;
import com.myntra.apiTests.erpservices.sellerapis.SellerConfig;
import com.myntra.apiTests.portalservices.ats.helper.ATSServiceHelper;
import com.myntra.apiTests.portalservices.ideaapi.IdeaApiHelper;
import com.myntra.lordoftherings.Toolbox;
import com.myntra.lordoftherings.boromir.DBUtilities;
import com.myntra.test.commons.testbase.BaseTest;

import org.codehaus.jackson.JsonParseException;
import org.codehaus.jackson.map.JsonMappingException;
import org.testng.ITestContext;
import org.testng.annotations.DataProvider;

import javax.xml.bind.JAXBException;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.sql.SQLException;

/**
 * 
 * @author Abhijit.pati
 */
public class ONHOLDServiceDP  extends BaseTest {

    static OMSServiceHelper omsServiceHelper = new OMSServiceHelper();
    static BountyServiceHelper bountyServiceHelper = new BountyServiceHelper();
    static String login = "omsonholdservicetest@gmail.com";
    static String password = "123456";
    static String uidx;
    static IdeaApiHelper ideaApiHelper = new IdeaApiHelper();
    static IMSServiceHelper imsServiceHelper = new IMSServiceHelper();
    static ATPServiceHelper atpServiceHelper = new ATPServiceHelper();
    static End2EndHelper end2EndHelper = new End2EndHelper();
	private static Long vectorSellerID = SellerConfig.getSellerID(SellerConfig.SellerName.HANDH);
	private static String supplyTypeOnHand = "ON_HAND";
    

    public static String getUidxForLogin(String login) throws IOException{
    	uidx = ideaApiHelper.getUIDXForLoginViaEmail("myntra", login);
    	return uidx;
    }
    
    @DataProvider(name = "oneOrderSingleItemHavingCODLimitExceededPPSDP")
    public static Object[][] oneOrderSingleItemHavingCODLimitExceededPPSDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70041589 = "<order><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>70041589</id><lastModifiedOn>2016-02-14T01:20:22+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>14995</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>14995</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>70041589</id><lastModifiedOn>2016-02-14T01:20:22+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>14995</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>14995</mrpTotal><onHold>false</onHold><orderId>70041589</orderId><orderLines><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>52698142</id><lastModifiedOn>2016-02-14T01:21:00+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>14995</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>1156582</optionId><orderId>70041589</orderId><orderReleaseId>70041589</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>5</quantity><sellerId>73</sellerId><skuId>1153620</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>346661</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>2999</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T01:20:22+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926131</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>2</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>d804593d-a60a-432e-94d2-73f3a99cabd2</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T01:20:22+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><sellerId>73</sellerId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>14995</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String payment_Plan_70041589 = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES('d804593d-a60a-432e-94d2-73f3a99cabd2', 'PPS Plan created', 'SYSTEM', 1455393016700, 'SALE', NULL, NULL, 'end2endautomation1@gmail.com', '70041589', 'ORDER', '1f1435bd-502d-4011-857b-2062a0ee7c28--s3', 'PPFSM Order Taking done', 'JJN002ff4aa3252a164dc7bf6ef810f293082b1455392944M', 'DEFAULT', 1499500, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item_70041589 = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941083, 'Payment Plan Item created', 'SYSTEM', 1455393016923, 'SKU', 299900, 5, '1', '1153620', 'd804593d-a60a-432e-94d2-73f3a99cabd2');";
        String payment_plan_item_instrument_70041589 = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27545, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455393016961, 1499500, 5, 99941083, NULL);";
        String payment_plan_instrument_Details_70041589 = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19310, 'PPS Plan Instrument Details created', 'SYSTEM', 1455393016923, 5, 1499500, 'd804593d-a60a-432e-94d2-73f3a99cabd2', 9182450, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords("'d804593d-a60a-432e-94d2-73f3a99cabd2'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041589");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        DBUtilities.exUpdateQuery(payment_Plan_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details_70041589, "pps");
        omsServiceHelper.createOrderInOMS(order_pps_70041589);

        Object[][] dataSet = new Object[][] { { "70041589" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "oneOrderSingleReleaseHavingMultipleLinesCODLimitExcededPPSDP")
    public static Object[][] oneOrderSingleReleaseHavingMultipleLinesCODLimitExcededPPSDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70042798 = "<order><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>70042798</id><lastModifiedOn>2016-02-24T23:48:21+05:30</lastModifiedOn><version>4</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>10590.96</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>10591</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason>COD Verification Failed</onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>70042798</id><lastModifiedOn>2016-02-24T23:46:27+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>10590.96</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>10591</mrpTotal><onHold>false</onHold><orderId>70042798</orderId><orderLines><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>52700185</id><lastModifiedOn>2016-02-24T23:46:41+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>1798</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4889</optionId><orderId>70042798</orderId><orderReleaseId>70042798</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>2</quantity><sellerId>73</sellerId><skuId>3843</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1534</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>899</unitPrice></orderLine><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>52700186</id><lastModifiedOn>2016-02-24T23:46:41+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>4</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4886</optionId><orderId>70042798</orderId><orderReleaseId>70042798</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>2</quantity><sellerId>73</sellerId><skuId>3836</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1532</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>2</unitPrice></orderLine><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>52700187</id><lastModifiedOn>2016-02-24T23:46:41+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>4794</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4855</optionId><orderId>70042798</orderId><orderReleaseId>70042798</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>6</quantity><sellerId>73</sellerId><skuId>3834</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-24T23:46:20+05:30</createdOn><id>52700188</id><lastModifiedOn>2016-02-24T23:46:41+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>3995</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4853</optionId><orderId>70042798</orderId><orderReleaseId>70042798</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>5</quantity><sellerId>73</sellerId><skuId>3832</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T23:46:25+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008940111</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>28</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>38093257-de7b-4fc8-bf27-63cee059108d</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T23:46:25+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>10590.96</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        String payment_Plan_70042798 = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`, `bankAccountId`) VALUES ('38093257-de7b-4fc8-bf27-63cee059108d', 'PPS Plan created', 'SYSTEM', 1456337779309, 'SALE', NULL, NULL, 'end2endautomation1@gmail.com', '70042798', 'ORDER', '256e9a8b-ab7a-4efa-b978-00a25e654a3b--s2', 'PPFSM Order Taking done', 'JJN001f3be8c36ff364976a2b56b033559c6551456337702M', 'DEFAULT', 1059100, NULL, NULL, NULL, '1.1.1.1', NULL);";
        String payment_plan_item_70042798 = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941752, 'Payment Plan Item created', 'SYSTEM', 1456337779728, 'SKU', 79900, 6, '1', '3834', '38093257-de7b-4fc8-bf27-63cee059108d'), (99941753, 'Payment Plan Item created', 'SYSTEM', 1456337779728, 'SKU', 89900, 2, '1', '3843', '38093257-de7b-4fc8-bf27-63cee059108d'), (99941754, 'Payment Plan Item created', 'SYSTEM', 1456337779728, 'SKU', 79900, 5, '1', '3832', '38093257-de7b-4fc8-bf27-63cee059108d'),(99941755, 'Payment Plan Item created', 'SYSTEM', 1456337779728, 'SKU', 200, 2, '1', '3836', '38093257-de7b-4fc8-bf27-63cee059108d');";
        String payment_plan_item_instrument_70042798 = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (30234, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780204, 452693, 5, 99941752, NULL),(30235, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780199, 26706, 0, 99941752, NULL),(30236, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780200, 10016, 0, 99941753, NULL),(30237, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780205, 169783, 5, 99941753, NULL),(30238, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780200, 22255, 0, 99941754, NULL),(30239, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780205, 377244, 5, 99941754, NULL),(30240, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780201, 22, 0, 99941755, NULL),(30241, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456337780205, 377, 5, 99941755, NULL);";
        String payment_plan_instrument_Details_70042798 = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (21091, 'PPS Plan Instrument Details created', 'SYSTEM', 1456337779727, 5, 1000097, '38093257-de7b-4fc8-bf27-63cee059108d', 9861801, 'DEBIT', NULL),(21092, 'PPS Plan Instrument Details created', 'SYSTEM', 1456337779727, 0, 58999, '38093257-de7b-4fc8-bf27-63cee059108d', 9861802, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords("'38093257-de7b-4fc8-bf27-63cee059108d'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70042798");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        DBUtilities.exUpdateQuery(payment_Plan_70042798, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_70042798, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument_70042798, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details_70042798, "pps");
        omsServiceHelper.createOrderInOMS(order_pps_70042798);

        Object[][] dataSet = new Object[][] { { "70042798" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }


    @DataProvider(name = "oneOrdermultipleItemsHavingCODLimitExceededPPSDP")
    public static Object[][] oneOrdermultipleItemsHavingCODLimitExceededPPSDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70041628 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-14T22:44:43+05:30</createdOn><id>70041628</id><lastModifiedOn>2016-02-14T22:44:49+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>10098</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>10098</mrpTotal><notes></notes><onHold>true</onHold><onHoldReason>COD Verification Failed</onHoldReason><onHoldReasonId>35</onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-14T22:44:43+05:30</createdOn><id>70041628</id><lastModifiedOn>2016-02-14T22:44:49+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>799</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70041628</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-14T22:44:43+05:30</createdOn><id>52698236</id><lastModifiedOn>2016-02-14T22:44:57+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70041628</orderId><orderReleaseId>70041628</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T22:44:48+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926155</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-14T22:44:43+05:30</createdOn><id>2141654939</id><lastModifiedOn>2016-02-14T22:44:49+05:30</lastModifiedOn><version>1</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>9299</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>9299</mrpTotal><onHold>false</onHold><orderId>70041628</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-14T22:44:43+05:30</createdOn><id>52698237</id><lastModifiedOn>2016-02-14T22:44:57+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>9299</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>646474</optionId><orderId>70041628</orderId><orderReleaseId>2141654939</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>646741</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>189726</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>9299</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T22:44:48+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926154</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>2</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>517dcadc-70ff-492f-942d-d71b2348d97a</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T22:44:48+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>10098</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String payment_Plan_70041628 = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('517dcadc-70ff-492f-942d-d71b2348d97a', 'PPS Plan created', 'SYSTEM', 1455470083295, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041628', 'ORDER', 'f87d2a2a-b20b-482c-a1a3-08fd17db0a4e--s1', 'PPFSM Order Taking done', 'JJN00565861044cddf4af8b194b55f8fd5a4621455470010M', 'DEFAULT', 1009800, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item_70041628 = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941084, 'Payment Plan Item created', 'SYSTEM', 1455470083497, 'SKU', 929900, 1, '1', '646741', '517dcadc-70ff-492f-942d-d71b2348d97a'),(99941085, 'Payment Plan Item created', 'SYSTEM', 1455470083497, 'SKU', 79900, 1, '1', '3831', '517dcadc-70ff-492f-942d-d71b2348d97a');";
        String payment_plan_item_instrument_70041628 = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27577, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455470083504, 929900, 5, 99941084, NULL),(27578, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455470083504, 79900, 5, 99941085, NULL);";
        String payment_plan_instrument_Details_70041628 = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19331, 'PPS Plan Instrument Details created', 'SYSTEM', 1455470083497, 5, 1009800, '517dcadc-70ff-492f-942d-d71b2348d97a', 9182451, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords("'517dcadc-70ff-492f-942d-d71b2348d97a'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041628");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        DBUtilities.exUpdateQuery(payment_Plan_70041628, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_70041628, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument_70041628, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details_70041628, "pps");
        omsServiceHelper.createOrderInOMS(order_pps_70041628);

        Object[][] dataSet = new Object[][] { { "70041628" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "multipleOrdersHavingCODLimitExceededDP")
    public static Object[][] multipleOrdersHavingCODLimitExceededDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70041629 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-15T00:08:49+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>801</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-15T00:08:49+05:30</lastModifiedOn><version>8</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-18T22:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-15T22:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-18T22:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-15T20:00:49+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T20:00:49+05:30</expectedPickingTime><expectedQCTime>2016-02-15T20:00:49+05:30</expectedQCTime><finalAmount>801</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70041629</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>52698240</id><lastModifiedOn>2016-02-15T00:08:56+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70041629</orderId><orderReleaseId>70041629</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T04:56:49+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:08:49+05:30</sellerProcessingStartTime><shippingCharge>2</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926156</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>57027205-a93c-45cf-beca-794aa66e928b</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><shippingCharge>2</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>801</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041630 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:15+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>abhijit</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>2299</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>2299</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:16+05:30</lastModifiedOn><version>8</version><address>bangalore</address><addressId>6129093</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-23T13:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>end2endautomation1&#x40;gmail.com</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-18T23:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-23T13:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-17T11:00:15+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T23:00:15+05:30</expectedPickingTime><expectedQCTime>2016-02-16T17:00:15+05:30</expectedQCTime><finalAmount>2299</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Hongasandra</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>4343434343</mobile><mrpTotal>2299</mrpTotal><onHold>false</onHold><orderId>70041630</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>52698242</id><lastModifiedOn>2016-02-15T00:29:28+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>2299</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>202965</optionId><orderId>70041630</orderId><orderReleaseId>70041630</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>209214</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>53784</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>2299</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><receiverName>abhijit </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T05:17:16+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:29:16+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926157</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>2299</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041631 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>6999</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>6999</mrpTotal><onHold>false</onHold><orderId>70041631</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>52698244</id><lastModifiedOn>2016-02-15T00:54:26+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>97975</discountRuleId><discountRuleRevId>1581774</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>6999</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>368466</optionId><orderId>70041631</orderId><orderReleaseId>70041631</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>373563</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>109146</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>6999</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926158</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>b02ee9b7-2358-4c7e-8495-dbd890a9295f</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>6999</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('57027205-a93c-45cf-beca-794aa66e928b', 'PPS Plan created', 'SYSTEM', 1455475123554, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041629', 'ORDER', '7ab30162-d9af-4331-b882-56b77b6346d2--s3', 'PPFSM Order Taking done', 'JJN00410ae414c2049408ba76c45437d8968bf1455475051M', 'DEFAULT', 80100, NULL, NULL, NULL, '1.1.1.1'), ('b02ee9b7-2358-4c7e-8495-dbd890a9295f', 'PPS Plan created', 'SYSTEM', 1455477841301, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041631', 'ORDER', '125ad4fc-0592-4e93-902a-793ca2336267--s2', 'PPFSM Order Taking done', 'JJN003588d32babc7b496bb912d6f04bb260391455477767M', 'DEFAULT', 699900, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941086, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SHIPPING_CHARGES', 200, 1, '1', 'PPS_9999', '57027205-a93c-45cf-beca-794aa66e928b'), (99941087, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SKU', 79900, 1, '1', '3831', '57027205-a93c-45cf-beca-794aa66e928b'), (99941088, 'Payment Plan Item created', 'SYSTEM', 1455477841517, 'SKU', 699900, 1, '1', '373563', 'b02ee9b7-2358-4c7e-8495-dbd890a9295f');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27579, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 200, 5, 99941086, NULL), (27580, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 79900, 5, 99941087, NULL), (27581, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455477841518, 699900, 5, 99941088, NULL);";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19332, 'PPS Plan Instrument Details created', 'SYSTEM', 1455475123839, 5, 80100, '57027205-a93c-45cf-beca-794aa66e928b', 9182452, 'DEBIT', NULL), (19333, 'PPS Plan Instrument Details created', 'SYSTEM', 1455477841517, 5, 699900, 'b02ee9b7-2358-4c7e-8495-dbd890a9295f', 9182453, 'DEBIT', NULL);";

        omsServiceHelper
                .deletePPSRecords("'57027205-a93c-45cf-beca-794aa66e928b','b02ee9b7-2358-4c7e-8495-dbd890a9295f'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041629, 70041630, 70041631");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70041629);
        omsServiceHelper.createOrderInOMS(order_pps_70041630);
        omsServiceHelper.createOrderInOMS(order_pps_70041631);

        Object[][] dataSet = new Object[][] { { "70041631" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "multipleOrdersHavingCODLimitExceededIncludingShippingChargesDP")
    public static Object[][] multipleOrdersHavingCODLimitExceededIncludingShippingChargesDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70042724 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T15:16:39+05:30</createdOn><id>70042724</id><lastModifiedOn>2016-02-24T15:18:45+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>9199</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>9199</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T15:16:39+05:30</createdOn><id>70042724</id><lastModifiedOn>2016-02-24T15:18:45+05:30</lastModifiedOn><version>9</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-27T22:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-24T22:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-27T22:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-24T20:00:44+05:30</expectedPackingTime><expectedPickingTime>2016-02-24T20:00:44+05:30</expectedPickingTime><expectedQCTime>2016-02-24T20:00:44+05:30</expectedQCTime><finalAmount>9199</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>9199</mrpTotal><onHold>false</onHold><orderId>70042724</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T15:16:39+05:30</createdOn><id>52700017</id><lastModifiedOn>2016-02-24T15:18:45+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>9199</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>479.57</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><govtTaxType>VAT</govtTaxType><govtTaxableAmount>8719.43</govtTaxableAmount><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>5097</optionId><orderId>70042724</orderId><orderReleaseId>70042724</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3862</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1540</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>9199</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T15:16:44+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-26T20:04:45+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-24T15:16:45+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008936133</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>94fdb4a6-91ba-454b-9890-2a1572f4741a</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T15:16:44+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>9199</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70042766 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T18:56:54+05:30</createdOn><id>70042766</id><lastModifiedOn>2016-02-24T18:57:00+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>abhijit</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>801</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason>COD Verification Failed</onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T18:56:54+05:30</createdOn><id>70042766</id><lastModifiedOn>2016-02-24T18:57:00+05:30</lastModifiedOn><version>5</version><address>bangalore</address><addressId>6129093</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>end2endautomation1&#x40;gmail.com</email><emiCharge>0</emiCharge><finalAmount>801</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Hongasandra</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>4343434343</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70042766</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-24T18:56:54+05:30</createdOn><id>52700109</id><lastModifiedOn>2016-02-24T18:57:10+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70042766</orderId><orderReleaseId>70042766</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T18:56:59+05:30</queuedOn><receiverName>abhijit </receiverName><refunded>false</refunded><shippingCharge>2</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008939108</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>b4bb033b-6235-4d7d-885b-a17224071fc7</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-24T18:56:59+05:30</queuedOn><shippingCharge>2</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>801</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`, `bankAccountId`) VALUES ('94fdb4a6-91ba-454b-9890-2a1572f4741a', 'PPS Plan created', 'SYSTEM', 1456307199146, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042724', 'ORDER', '5549381f-bd46-44de-8b15-4164804912fa--s1', 'PPFSM Order Taking done', 'JJN003cb772ab011534ac98db741d90f24a8fe1456307126M', 'DEFAULT', 919900, NULL, NULL, NULL, '1.1.1.1', NULL), ('b4bb033b-6235-4d7d-885b-a17224071fc7', 'PPS Plan created', 'SYSTEM', 1456320413958, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042766', 'ORDER', '92f950c0-7773-4230-afb8-1e665595670d--s1', 'PPFSM Order Taking done', 'JJN001fb4e4f32170f4ddfbfd0890056c848661456320350M', 'DEFAULT', 80100, NULL, NULL, 'Mozilla/5.0 (Linux; Android 4.3; Nexus 7 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2490.76 Safari/537.36', '182.71.248.194', NULL);";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`)VALUES (99941703, 'Payment Plan Item created', 'SYSTEM', 1456307199384, 'SKU', 919900, 1, '1', '3862', '94fdb4a6-91ba-454b-9890-2a1572f4741a'), (99941725, 'Payment Plan Item created', 'SYSTEM', 1456320414205, 'SKU', 79900, 1, '1', '3831', 'b4bb033b-6235-4d7d-885b-a17224071fc7'), (99941726, 'Payment Plan Item created', 'SYSTEM', 1456320414205, 'SHIPPING_CHARGES', 200, 1, '1', 'PPS_9999', 'b4bb033b-6235-4d7d-885b-a17224071fc7');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (29978, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456307199385, 919900, 5, 99941703, NULL), (30188, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456320414207, 79900, 5, 99941725, NULL),(30189, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456320414207, 200, 5, 99941726, NULL);";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES(20922, 'PPS Plan Instrument Details created', 'SYSTEM', 1456307199384, 5, 919900, '94fdb4a6-91ba-454b-9890-2a1572f4741a', 9861739, 'DEBIT', NULL), (21067, 'PPS Plan Instrument Details created', 'SYSTEM', 1456320414205, 5, 80100, 'b4bb033b-6235-4d7d-885b-a17224071fc7', 9861763, 'DEBIT', NULL);";

        omsServiceHelper
                .deletePPSRecords("'94fdb4a6-91ba-454b-9890-2a1572f4741a','b4bb033b-6235-4d7d-885b-a17224071fc7'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70042724, 70042766");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70042724);
        omsServiceHelper.createOrderInOMS(order_pps_70042766);

        Object[][] dataSet = new Object[][] { { "70042766" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }
    
	
    @DataProvider(name = "multipleOrdersWithOneOrdersReleaseCancelledDP")
    public static Object[][] multipleOrdersWithOneOrdersReleaseCancelledDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
    	updateOnHoldInOnholdReasonsMaster("35",0);
        // # Create Order in OMS DB
        String order_pps_70041629 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-18T13:12:44+05:30</lastModifiedOn><version>1</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>801</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-18T13:26:32+05:30</lastModifiedOn><version>3</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cancellationPpsId>f3d6506c-2fe9-49ef-9189-7a1e7cbb38be</cancellationPpsId><cancellationReason>CC Cancellation - OOS Cancellation</cancellationReason><cancellationReasonId>1</cancellationReasonId><cancelledOn>2016-02-18T13:26:31+05:30</cancelledOn><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-18T22:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-15T22:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-18T22:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-15T20:00:49+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T20:00:49+05:30</expectedPickingTime><expectedQCTime>2016-02-15T20:00:49+05:30</expectedQCTime><finalAmount>801</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  (Bangalore)</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70041629</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>52698240</id><lastModifiedOn>2016-02-18T13:12:44+05:30</lastModifiedOn><version>1</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70041629</orderId><orderReleaseId>70041629</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T04:56:49+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:08:49+05:30</sellerProcessingStartTime><shippingCharge>2</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>F</status><statusDisplayName>Cancelled</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926156</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>57027205-a93c-45cf-beca-794aa66e928b</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><shippingCharge>2</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>801</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041630 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:15+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>abhijit</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>2299</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>2299</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:16+05:30</lastModifiedOn><version>8</version><address>bangalore</address><addressId>6129093</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-23T13:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>end2endautomation1&#x40;gmail.com</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-18T23:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-23T13:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-17T11:00:15+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T23:00:15+05:30</expectedPickingTime><expectedQCTime>2016-02-16T17:00:15+05:30</expectedQCTime><finalAmount>2299</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Hongasandra</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>4343434343</mobile><mrpTotal>2299</mrpTotal><onHold>false</onHold><orderId>70041630</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>52698242</id><lastModifiedOn>2016-02-15T00:29:28+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>2299</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>202965</optionId><orderId>70041630</orderId><orderReleaseId>70041630</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>209214</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>53784</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>2299</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><receiverName>abhijit </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T05:17:16+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:29:16+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926157</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>2299</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041631 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>6999</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>6999</mrpTotal><onHold>false</onHold><orderId>70041631</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>52698244</id><lastModifiedOn>2016-02-15T00:54:26+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>97975</discountRuleId><discountRuleRevId>1581774</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>6999</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>368466</optionId><orderId>70041631</orderId><orderReleaseId>70041631</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>373563</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>109146</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>6999</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926158</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>b02ee9b7-2358-4c7e-8495-dbd890a9295f</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>6999</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        // # Insert into PPS DB
        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('57027205-a93c-45cf-beca-794aa66e928b', 'PPS Plan created', 'SYSTEM', 1455475123554, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041629', 'ORDER', '7ab30162-d9af-4331-b882-56b77b6346d2--s3', 'PPFSM Order Taking done', 'JJN00410ae414c2049408ba76c45437d8968bf1455475051M', 'DEFAULT', 80100, NULL, NULL, NULL, '1.1.1.1'), ('b02ee9b7-2358-4c7e-8495-dbd890a9295f', 'PPS Plan created', 'SYSTEM', 1455477841301, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041631', 'ORDER', '125ad4fc-0592-4e93-902a-793ca2336267--s2', 'PPFSM Order Taking done', 'JJN003588d32babc7b496bb912d6f04bb260391455477767M', 'DEFAULT', 699900, NULL, NULL, NULL, '1.1.1.1'), ('f3d6506c-2fe9-49ef-9189-7a1e7cbb38be', 'PPS Plan created', 'SYSTEM', 1455601851329, 'CANCELLATION', 'RELEASE_CANCELLATION_REFUND70041629', NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041629', 'ORDER', '57027205-a93c-45cf-beca-794aa66e928b', 'PPFSM Refund done', NULL, NULL, NULL, NULL, NULL, NULL, NULL);";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941086, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SHIPPING_CHARGES', 200, 1, '1', 'PPS_9999', '57027205-a93c-45cf-beca-794aa66e928b'), (99941087, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SKU', 79900, 1, '1', '3831', '57027205-a93c-45cf-beca-794aa66e928b'), (99941088, 'Payment Plan Item created', 'SYSTEM', 1455477841517, 'SKU', 699900, 1, '1', '373563', 'b02ee9b7-2358-4c7e-8495-dbd890a9295f'), (99941127, 'Payment Plan Refund Item created', 'SYSTEM', 1455601851455, 'SHIPPING_CHARGES', 200, 1, '1', 'PPS_9999', 'f3d6506c-2fe9-49ef-9189-7a1e7cbb38be'), (99941128, 'Payment Plan Refund Item created', 'SYSTEM', 1455601851408, 'SKU', 79900, 1, '1', '3831', 'f3d6506c-2fe9-49ef-9189-7a1e7cbb38be');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27579, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 200, 5, 99941086, NULL), (27580, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 79900, 5, 99941087, NULL), (27581, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455477841518, 699900, 5, 99941088, NULL), (27818, NULL, 'SYSTEM', 1455601851471, 200, 5, 99941127, 'REFUND'), (27819, NULL, 'SYSTEM', 1455601851423, 79900, 5, 99941128, 'REFUND');";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19332, 'PPS Plan Instrument Details created', 'SYSTEM', 1455475123839, 5, 80100, '57027205-a93c-45cf-beca-794aa66e928b', 9182452, 'DEBIT', NULL), (19333, 'PPS Plan Instrument Details created', 'SYSTEM', 1455477841517, 5, 699900, 'b02ee9b7-2358-4c7e-8495-dbd890a9295f', 9182453, 'DEBIT', NULL), (19488, 'PPS Plan Instrument Details created', 'SYSTEM', 1455601851800, 5, 80100, 'f3d6506c-2fe9-49ef-9189-7a1e7cbb38be', 9182476, 'REFUND', NULL);";

        omsServiceHelper.deletePPSRecords(
                "'57027205-a93c-45cf-beca-794aa66e928b','f3d6506c-2fe9-49ef-9189-7a1e7cbb38be', 'b02ee9b7-2358-4c7e-8495-dbd890a9295f', '1529db8e-8890-46f9-8e37-cc5c47852a61', '1529db8e-8890-46f9-8e37-cc5c47852a61'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041629,70041630,70041631,70042184");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70041629);
        omsServiceHelper.createOrderInOMS(order_pps_70041630);
        omsServiceHelper.createOrderInOMS(order_pps_70041631);

        Object[][] dataSet = new Object[][] { { "70041631" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "multipleOrdersWithOneOrdersLinCancelledDP")
    public static Object[][] multipleOrdersWithOneOrdersLinCancelledDP(ITestContext testContext)
            throws SQLException, IOException, JAXBException {
    	updateOnHoldInOnholdReasonsMaster("37", 0);
    	
		omsServiceHelper.refreshOMSApplicationPropertyCache();
		omsServiceHelper.refreshOMSJVMCache();
    	End2EndHelper.sleep(15000L);
        // # Create Order in OMS DB
    	login = "end2endautomation1@gmail.com";
    	uidx = ideaApiHelper.getUIDXForLoginViaEmail("myntra", login);
        ATSServiceHelper knightServiceHelper = new ATSServiceHelper();
        knightServiceHelper.setOutstandingCODLimitForLogin(uidx, "10000");
        String order_pps_70042208 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>70042208</id><lastModifiedOn>2016-02-18T19:19:58+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>10492</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>10492</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>70042208</id><lastModifiedOn>2016-02-18T23:22:52+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>8894</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>8894</mrpTotal><onHold>true</onHold><onHoldReason>Release Processing Error</onHoldReason><onHoldReasonId>31</onHoldReasonId><orderId>70042208</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>52699381</id><lastModifiedOn>2016-02-18T23:22:52+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70042208</orderId><orderReleaseId>70042208</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>52699382</id><lastModifiedOn>2016-02-18T19:20:17+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>3596</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4841</optionId><orderId>70042208</orderId><orderReleaseId>70042208</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>4</quantity><sellerId>73</sellerId><skuId>3840</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1533</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>899</unitPrice></orderLine><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>52699383</id><lastModifiedOn>2016-02-18T19:20:17+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>4499</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>368460</optionId><orderId>70042208</orderId><orderReleaseId>70042208</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>373555</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>109145</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>4499</unitPrice></orderLine><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-18T19:19:51+05:30</createdOn><id>52699387</id><lastModifiedOn>2016-02-18T23:23:20+05:30</lastModifiedOn><version>1</version><cancellationPpsId>ca6b03ac-71c6-49a6-bdc3-b51af39dc188</cancellationPpsId><cancellationReason>CC Cancellation-OOS Cancellation</cancellationReason><cancellationReasonId>39</cancellationReasonId><cancelledOn>2016-02-18T23:22:52+05:30</cancelledOn><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>1598</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70042208</orderId><orderReleaseId>70042208</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>2</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>IC</status><statusDisplayName>Cancelled</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-18T19:19:57+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo></trackingNo><userContactNo>9439543863</userContactNo><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>acafbf37-42d1-4bb0-9358-00eca0588ad7</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-18T19:19:57+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>10492</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70042209 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-19T00:04:03+05:30</createdOn><id>70042209</id><lastModifiedOn>2016-02-19T11:51:15+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>799</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-19T00:04:03+05:30</createdOn><id>70042209</id><lastModifiedOn>2016-02-19T11:51:15+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>799</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70042209</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-19T00:04:03+05:30</createdOn><id>52699400</id><lastModifiedOn>2016-02-19T11:51:55+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70042209</orderId><orderReleaseId>70042209</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-19T11:51:12+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008933110</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>5dea1bdc-23e6-4517-983a-385237a31200</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-19T11:51:12+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>799</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        // # Insert into PPS DB
        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('5dea1bdc-23e6-4517-983a-385237a31200', 'PPS Plan created', 'SYSTEM', 1455820442904, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042209', 'ORDER', 'db433789-b1a1-486d-bf17-510d2baa7cdd--s3', 'PPFSM Order Taking done', 'JJN00559b8db9386e447b280a3d173f2778fdb1455820370M', 'DEFAULT', 79900, NULL, NULL, NULL, '1.1.1.1'), ('acafbf37-42d1-4bb0-9358-00eca0588ad7', 'PPS Plan created', 'SYSTEM', 1455803391614, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042208', 'ORDER', 'f22ea724-36fc-4965-890b-5a8a9bc9a102--s2', 'PPFSM Order Taking done', 'JJN001afabbc76242f4378957e9ef698a5b57b1455803318M', 'DEFAULT', 1049200, NULL, NULL, NULL, '1.1.1.1'), ('ca6b03ac-71c6-49a6-bdc3-b51af39dc188', 'PPS Plan created', 'SYSTEM', 1455817972804, 'CANCELLATION', 'LINE_CANCELLATION_REFUND_70042208_6', NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042208', 'ORDER', 'acafbf37-42d1-4bb0-9358-00eca0588ad7', 'PPFSM Refund done', NULL, NULL, NULL, NULL, NULL, NULL, NULL);";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941431, 'Payment Plan Item created', 'SYSTEM', 1455820443080, 'SKU', 79900, 1, '1', '3831', '5dea1bdc-23e6-4517-983a-385237a31200'), (99941427, 'Payment Plan Item created', 'SYSTEM', 1455803391821, 'SKU', 79900, 3, '1', '3831', 'acafbf37-42d1-4bb0-9358-00eca0588ad7'), (99941428, 'Payment Plan Item created', 'SYSTEM', 1455803391821, 'SKU', 449900, 1, '1', '373555', 'acafbf37-42d1-4bb0-9358-00eca0588ad7'), (99941429, 'Payment Plan Item created', 'SYSTEM', 1455803391821, 'SKU', 89900, 4, '1', '3840', 'acafbf37-42d1-4bb0-9358-00eca0588ad7'), (99941430, 'Payment Plan Refund Item created', 'SYSTEM', 1455817972873, 'SKU', 79900, 2, '1', '3831', 'ca6b03ac-71c6-49a6-bdc3-b51af39dc188');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (28714, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455820443085, 79900, 5, 99941431, NULL), (28710, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455803391823, 239700, 5, 99941427, NULL), (28711, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455803391823, 449900, 5, 99941428, NULL), (28712, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455803391823, 359600, 5, 99941429, NULL), (28713, NULL, 'SYSTEM', 1455817972892, 159800, 5, 99941430, 'REFUND');";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (20074, 'PPS Plan Instrument Details created', 'SYSTEM', 1455820443079, 5, 79900, '5dea1bdc-23e6-4517-983a-385237a31200', 9182726, 'DEBIT', NULL), (20072, 'PPS Plan Instrument Details created', 'SYSTEM', 1455803391821, 5, 1049200, 'acafbf37-42d1-4bb0-9358-00eca0588ad7', 9182724, 'DEBIT', NULL), (20073, 'PPS Plan Instrument Details created', 'SYSTEM', 1455817972892, 5, 159800, 'ca6b03ac-71c6-49a6-bdc3-b51af39dc188', 9182725, 'REFUND', NULL);";

        omsServiceHelper.deletePPSRecords(
                "'acafbf37-42d1-4bb0-9358-00eca0588ad7','ca6b03ac-71c6-49a6-bdc3-b51af39dc188','5dea1bdc-23e6-4517-983a-385237a31200', 'd146032d-3cf7-472c-b52f-ac9a0cd396fa'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70042208, 70042209, 70042270");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70042208);
        omsServiceHelper.createOrderInOMS(order_pps_70042209);

        Object[][] dataSet = new Object[][] { { "70042209" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "evaluateCODOnHoldCheckOrderHavingmultipleReleasesAndOneReleaseDeliveredDP")
    public static Object[][] evaluateCODOnHoldCheckOrderHavingmultipleReleasesAndOneReleaseDeliveredDP(
            ITestContext testContext) throws SQLException, JAXBException, IOException {
    	String login = "end2endautomation1@gmail.com";

    	uidx = ideaApiHelper.getUIDXForLoginViaEmail("myntra", login);
        String order_pps_70041629 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-15T00:08:49+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>801</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>70041629</id><lastModifiedOn>2016-02-15T00:08:49+05:30</lastModifiedOn><version>8</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-18T22:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-15T22:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-18T22:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-15T20:00:49+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T20:00:49+05:30</expectedPickingTime><expectedQCTime>2016-02-15T20:00:49+05:30</expectedQCTime><finalAmount>801</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70041629</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:08:44+05:30</createdOn><id>52698240</id><lastModifiedOn>2016-02-15T00:08:56+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4852</optionId><orderId>70041629</orderId><orderReleaseId>70041629</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3831</skuId><status>D</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T04:56:49+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:08:49+05:30</sellerProcessingStartTime><shippingCharge>2</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>DL</status><statusDisplayName>Delivered</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926156</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>36</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>57027205-a93c-45cf-beca-794aa66e928b</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:08:49+05:30</queuedOn><shippingCharge>2</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>801</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041630 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:15+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>abhijit</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>2299</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>2299</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>70041630</id><lastModifiedOn>2016-02-15T00:29:16+05:30</lastModifiedOn><version>8</version><address>bangalore</address><addressId>6129093</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-23T13:01:02+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>end2endautomation1&#x40;gmail.com</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-18T23:01:02+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-23T13:01:02+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-17T11:00:15+05:30</expectedPackingTime><expectedPickingTime>2016-02-15T23:00:15+05:30</expectedPickingTime><expectedQCTime>2016-02-16T17:00:15+05:30</expectedQCTime><finalAmount>2299</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Hongasandra</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>4343434343</mobile><mrpTotal>2299</mrpTotal><onHold>false</onHold><orderId>70041630</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:29:10+05:30</createdOn><id>52698242</id><lastModifiedOn>2016-02-15T00:29:28+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>2299</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>202965</optionId><orderId>70041630</orderId><orderReleaseId>70041630</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>209214</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>53784</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>2299</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><receiverName>abhijit </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-17T05:17:16+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-15T00:29:16+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926157</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:29:15+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>2299</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70041631 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>6999</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>70041631</id><lastModifiedOn>2016-02-15T00:54:07+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>6999</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>6999</mrpTotal><onHold>false</onHold><orderId>70041631</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-15T00:54:01+05:30</createdOn><id>52698244</id><lastModifiedOn>2016-02-15T00:54:26+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>97975</discountRuleId><discountRuleRevId>1581774</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>6999</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>368466</optionId><orderId>70041631</orderId><orderReleaseId>70041631</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>373563</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>109146</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>6999</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926158</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>b02ee9b7-2358-4c7e-8495-dbd890a9295f</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-15T00:54:06+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>6999</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('57027205-a93c-45cf-beca-794aa66e928b', 'PPS Plan created', 'SYSTEM', 1455475123554, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041629', 'ORDER', '7ab30162-d9af-4331-b882-56b77b6346d2--s3', 'PPFSM Order Taking done', 'JJN00410ae414c2049408ba76c45437d8968bf1455475051M', 'DEFAULT', 80100, NULL, NULL, NULL, '1.1.1.1'), ('b02ee9b7-2358-4c7e-8495-dbd890a9295f', 'PPS Plan created', 'SYSTEM', 1455477841301, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70041631', 'ORDER', '125ad4fc-0592-4e93-902a-793ca2336267--s2', 'PPFSM Order Taking done', 'JJN003588d32babc7b496bb912d6f04bb260391455477767M', 'DEFAULT', 699900, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941086, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SHIPPING_CHARGES', 200, 1, '1', 'PPS_9999', '57027205-a93c-45cf-beca-794aa66e928b'), (99941087, 'Payment Plan Item created', 'SYSTEM', 1455475123839, 'SKU', 79900, 1, '1', '3831', '57027205-a93c-45cf-beca-794aa66e928b'), (99941088, 'Payment Plan Item created', 'SYSTEM', 1455477841517, 'SKU', 699900, 1, '1', '373563', 'b02ee9b7-2358-4c7e-8495-dbd890a9295f');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27579, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 200, 5, 99941086, NULL), (27580, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455475123840, 79900, 5, 99941087, NULL), (27581, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455477841518, 699900, 5, 99941088, NULL);";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19332, 'PPS Plan Instrument Details created', 'SYSTEM', 1455475123839, 5, 80100, '57027205-a93c-45cf-beca-794aa66e928b', 9182452, 'DEBIT', NULL), (19333, 'PPS Plan Instrument Details created', 'SYSTEM', 1455477841517, 5, 699900, 'b02ee9b7-2358-4c7e-8495-dbd890a9295f', 9182453, 'DEBIT', NULL);";

        omsServiceHelper
                .deletePPSRecords("'57027205-a93c-45cf-beca-794aa66e928b','b02ee9b7-2358-4c7e-8495-dbd890a9295f'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041629, 70041630, 70041631");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70041629);
        omsServiceHelper.createOrderInOMS(order_pps_70041630);
        omsServiceHelper.createOrderInOMS(order_pps_70041631);

        Object[][] dataSet = new Object[][] { { "70041631" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "evaluateCODOnHoldRuleForOnlineOrdersDP")
    public static Object[][] evaluateCODOnHoldRuleForOnlineOrdersDP(ITestContext testContext)
            throws SQLException, UnsupportedEncodingException, JAXBException {
        String order_pps_70041589 = "<order><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>70041589</id><lastModifiedOn>2016-02-14T01:20:22+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>14995</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>14995</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>70041589</id><lastModifiedOn>2016-02-14T01:20:22+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>14995</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>end2endautomation1@gmail.com</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>14995</mrpTotal><onHold>false</onHold><orderId>70041589</orderId><orderLines><orderLine><createdBy>end2endautomation1@gmail.com</createdBy><createdOn>2016-02-14T01:20:17+05:30</createdOn><id>52698142</id><lastModifiedOn>2016-02-14T01:21:00+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>14995</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>1156582</optionId><orderId>70041589</orderId><orderReleaseId>70041589</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>5</quantity><sellerId>73</sellerId><skuId>1153620</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>346661</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5.5</taxRate><unitPrice>2999</unitPrice></orderLine></orderLines><paymentMethod>on</paymentMethod><paymentMethodDisplay>Online</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T01:20:22+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008926131</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>2</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>on</paymentMethod><paymentMethodDisplay>Online</paymentMethodDisplay><paymentPpsId>d804593d-a60a-432e-94d2-73f3a99cabd2</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-14T01:20:22+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>14995</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String payment_Plan_70041589 = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES('d804593d-a60a-432e-94d2-73f3a99cabd2', 'PPS Plan created', 'SYSTEM', 1455393016700, 'SALE', NULL, NULL, 'end2endautomation1@gmail.com', '70041589', 'ORDER', '1f1435bd-502d-4011-857b-2062a0ee7c28--s3', 'PPFSM Order Taking done', 'JJN002ff4aa3252a164dc7bf6ef810f293082b1455392944M', 'DEFAULT', 1499500, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item_70041589 = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941083, 'Payment Plan Item created', 'SYSTEM', 1455393016923, 'SKU', 299900, 5, '1', '1153620', 'd804593d-a60a-432e-94d2-73f3a99cabd2');";
        String payment_plan_item_instrument_70041589 = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (27545, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1455393016961, 1499500, 1, 99941083, NULL);";
        String payment_plan_instrument_Details_70041589 = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (19310, 'PPS Plan Instrument Details created', 'SYSTEM', 1455393016923, 1, 1499500, 'd804593d-a60a-432e-94d2-73f3a99cabd2', 9182450, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords("'d804593d-a60a-432e-94d2-73f3a99cabd2'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70041589");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        DBUtilities.exUpdateQuery(payment_Plan_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument_70041589, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details_70041589, "pps");
        omsServiceHelper.createOrderInOMS(order_pps_70041589);

        Object[][] dataSet = new Object[][] { { "70041589" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }
    
    @DataProvider(name = "evaluateCODOnHoldRuleForMixedPaymentInstrumentPPSDP")
    public static Object[][] evaluateCODOnHoldRuleForMixedPaymentInstrumentPPSDP(ITestContext testContext)
            throws SQLException, IOException, JAXBException {
    	String login = "end2endautomation1@gmail.com";
        String order_pps_70042458 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T14:08:08+05:30</createdOn><id>70042458</id><lastModifiedOn>2016-02-22T14:10:08+05:30</lastModifiedOn><version>4</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>11996</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0.5</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>11996</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T14:08:08+05:30</createdOn><id>70042458</id><lastModifiedOn>2016-02-22T14:08:13+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>11996</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0.5</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>11996</mrpTotal><onHold>true</onHold><onHoldReason>Release Processing Error</onHoldReason><onHoldReasonId>31</onHoldReasonId><orderId>70042458</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T14:08:08+05:30</createdOn><id>52699607</id><lastModifiedOn>2016-02-22T14:08:26+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>11996</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>12.5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0.5</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>1156582</optionId><orderId>70042458</orderId><orderReleaseId>70042458</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>4</quantity><sellerId>73</sellerId><skuId>1153620</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>346661</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>12.5</taxRate><unitPrice>2999</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T14:08:13+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo></trackingNo><userContactNo>9439543863</userContactNo><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>067505cb-9251-450c-a51e-ce6534813b0b</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T14:08:13+05:30</queuedOn><shippingCharge>0</shippingCharge><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>11996</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String payment_Plan_70042458 = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('067505cb-9251-450c-a51e-ce6534813b0b', 'PPS Plan created', 'SYSTEM', 1456130287628, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042458', 'ORDER', 'bd6fd04e-cf66-4c90-9d97-a835f7dbf6c2--s2', 'PPFSM Order Taking done', 'JJN003f2be4b10b2cb41b1bbc945b3262e12831456130215M', 'DEFAULT', 1199600, NULL, NULL, NULL, '1.1.1.1');";
        String payment_plan_item_70042458 = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941522, 'Payment Plan Item created', 'SYSTEM', 1456130287819, 'SKU', 299900, 4, '73', '1153620', '067505cb-9251-450c-a51e-ce6534813b0b');";
        String payment_plan_item_instrument_70042458 = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (29252, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456130287821, 200000, 0, 99941522, NULL), (29253, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456130287822, 899600, 5, 99941522, NULL), (29254, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456130287821, 100000, 7, 99941522, NULL);";
        String payment_plan_instrument_Details_70042458 = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`)VALUES (20446, 'PPS Plan Instrument Details created', 'SYSTEM', 1456130287819, 7, 100000, '067505cb-9251-450c-a51e-ce6534813b0b', 9182796, 'DEBIT', NULL), (20447, 'PPS Plan Instrument Details created', 'SYSTEM', 1456130287819, 0, 200000, '067505cb-9251-450c-a51e-ce6534813b0b', 9182797, 'DEBIT', NULL), (20448, 'PPS Plan Instrument Details created', 'SYSTEM', 1456130287819, 5, 899600, '067505cb-9251-450c-a51e-ce6534813b0b', 9182795, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords("'067505cb-9251-450c-a51e-ce6534813b0b'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70042458, 70041630");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(ideaApiHelper.getUIDXForLoginViaEmail("myntra", login), login);
       

        DBUtilities.exUpdateQuery(payment_Plan_70042458, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_70042458, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument_70042458, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details_70042458, "pps");
        omsServiceHelper.createOrderInOMS(order_pps_70042458);

        Object[][] dataSet = new Object[][] { { "70042458" } };

        ATSServiceHelper knightServiceHelper = new ATSServiceHelper();
        knightServiceHelper.setOutstandingCODLimitForLogin(login, "10001");

        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "evaluateCODOnHoldCheckOrderHavingMultipleReleasesAndOneItemExchangedDP")
    public static Object[][] evaluateCODOnHoldCheckOrderHavingMultipleReleasesAndOneItemExchangedDP(
            ITestContext testContext) throws SQLException, IOException, JAXBException {
    	String login = "end2endautomation1@gmail.com";
    	uidx = ideaApiHelper.getUIDXForLoginViaEmail("myntra", login);
    	updateOnHoldInOnholdReasonsMaster("37", 0);
    	End2EndHelper.sleep(15000L);
        ATSServiceHelper knightServiceHelper = new ATSServiceHelper();
        knightServiceHelper.setOutstandingCODLimitForLogin(uidx, "10000");
        String order_pps_70042404 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:16:02+05:30</createdOn><id>70042404</id><lastModifiedOn>2016-02-22T10:18:08+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>6392</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>6392</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:16:02+05:30</createdOn><id>70042404</id><lastModifiedOn>2016-02-22T10:18:08+05:30</lastModifiedOn><version>10</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-28T17:00:00+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><expectedCutoffTime>2016-02-26T17:00:00+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-28T17:00:00+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-25T04:59:08+05:30</expectedPackingTime><expectedPickingTime>2016-02-23T16:59:08+05:30</expectedPickingTime><expectedQCTime>2016-02-24T10:59:08+05:30</expectedQCTime><finalAmount>6392</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>6392</mrpTotal><onHold>false</onHold><orderId>70042404</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:16:02+05:30</createdOn><id>52699519</id><lastModifiedOn>2016-02-22T10:18:08+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>6392</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>333.23</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><govtTaxType>VAT</govtTaxType><govtTaxableAmount>6058.77</govtTaxableAmount><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4853</optionId><orderId>70042404</orderId><orderReleaseId>70042404</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>8</quantity><sellerId>73</sellerId><skuId>3832</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:16:08+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-24T15:04:08+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-22T10:16:08+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008933126</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>96580401-cc6f-488c-95bc-a1f18a2eceaa</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:16:08+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>6392</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70042406 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:22:14+05:30</createdOn><id>70042406</id><lastModifiedOn>2016-02-22T10:29:07+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>3995</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>3995</mrpTotal><notes></notes><onHold>false</onHold><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:22:14+05:30</createdOn><id>70042406</id><lastModifiedOn>2016-02-22T10:30:21+05:30</lastModifiedOn><version>6</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><deliveredOn>2016-02-22T10:27:33+05:30</deliveredOn><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>3995</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>3995</mrpTotal><onHold>false</onHold><orderId>70042406</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:22:14+05:30</createdOn><id>52699523</id><lastModifiedOn>2016-02-22T10:27:33+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>3995</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4853</optionId><orderId>70042406</orderId><orderReleaseId>70042406</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>5</quantity><sellerId>73</sellerId><skuId>3832</skuId><status>D</status><statusDisplayName>Delivered</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><packedOn>2016-02-22T10:26:00+05:30</packedOn><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:22:20+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippedOn>2016-02-22T10:26:33+05:30</shippedOn><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>DL</status><statusDisplayName>Delivered</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008933128</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>7b74ebdc-4cf6-4da1-8d45-fa10025aee5e</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:22:20+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>3995</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70042407 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:32:18+05:30</createdOn><id>70042407</id><lastModifiedOn>2016-02-22T10:34:19+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>799</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>799</mrpTotal><notes>PLS</notes><onHold>false</onHold><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T10:32:18+05:30</createdOn><id>70042407</id><lastModifiedOn>2016-02-22T10:34:19+05:30</lastModifiedOn><version>9</version><address>Myntra Design, AKR B</address><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>ML</courierCode><courierDisplayName>Myntra Logistics</courierDisplayName><customerPromiseTime>2016-02-28T17:00:00+05:30</customerPromiseTime><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><exchangeReleaseId>70042406</exchangeReleaseId><expectedCutoffTime>2016-02-26T17:00:00+05:30</expectedCutoffTime><expectedDeliveryPromise>2016-02-28T17:00:00+05:30</expectedDeliveryPromise><expectedPackingTime>2016-02-25T04:59:18+05:30</expectedPackingTime><expectedPickingTime>2016-02-23T16:59:18+05:30</expectedPickingTime><expectedQCTime>2016-02-24T10:59:18+05:30</expectedQCTime><finalAmount>799</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  (Bangalore)</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>799</mrpTotal><onHold>false</onHold><orderId>70042407</orderId><orderLines><orderLine><createdBy>SYSTEM</createdBy><createdOn>2016-02-22T10:32:18+05:30</createdOn><id>52699525</id><lastModifiedOn>2016-02-22T10:34:19+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><exchangeLineId>52699523</exchangeLineId><finalAmount>799</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>41.65</govtTaxAmount><govtTaxRate>5.5</govtTaxRate><govtTaxType>VAT</govtTaxType><govtTaxableAmount>757.35</govtTaxableAmount><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4853</optionId><orderId>70042407</orderId><orderReleaseId>70042407</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>1</quantity><sellerId>73</sellerId><skuId>3832</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>1</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>on</paymentMethod><paymentMethodDisplay>Online</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:32:18+05:30</queuedOn><receiverName>END2END Automation1</receiverName><refunded>false</refunded><sellerProcessingEndTime>2016-02-24T15:20:19+05:30</sellerProcessingEndTime><sellerProcessingStartTime>2016-02-22T10:32:19+05:30</sellerProcessingStartTime><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>WP</status><statusDisplayName>Work in progress</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo>ML0008933129</trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>ex</orderType><orderTypeDisplay>Exchange</orderTypeDisplay><paymentMethod>on</paymentMethod><paymentMethodDisplay>Online</paymentMethodDisplay><paymentPpsId>248a657e-a90a-48d6-b895-beac2e4e259b</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T10:32:18+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>799</totalOrderValue><userContactNo>9439543863</userContactNo></order>";
        String order_pps_70042440 = "<order><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T12:52:10+05:30</createdOn><id>70042440</id><lastModifiedOn>2016-02-22T12:52:16+05:30</lastModifiedOn><version>3</version><cartDiscount>0</cartDiscount><cashBackCouponCode></cashBackCouponCode><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><channel>web</channel><codCharge>0</codCharge><couponCode></couponCode><couponDiscount>0</couponDiscount><customerName>END2END Automation1</customerName><discount>0</discount><earnedCredit>0</earnedCredit><emiCharge>0</emiCharge><finalAmount>3196</finalAmount><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><giftOrder>false</giftOrder><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mrpTotal>3196</mrpTotal><notes></notes><onHold>false</onHold><onHoldReason></onHoldReason><onHoldReasonId></onHoldReasonId><orderProcessingFlowMode>OMS</orderProcessingFlowMode><orderReleases><orderRelease><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T12:52:10+05:30</createdOn><id>70042440</id><lastModifiedOn>2016-02-22T12:52:15+05:30</lastModifiedOn><version>5</version><address>Myntra Design, AKR B</address><addressId>6118982</addressId><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><city>Bangalore</city><codCharge>0</codCharge><codPaymentStatus>pending</codPaymentStatus><country>India</country><couponDiscount>0</couponDiscount><courierCode>EK</courierCode><courierDisplayName>EKart</courierDisplayName><discount>0</discount><earnedCredit>0</earnedCredit><email>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</email><emiCharge>0</emiCharge><finalAmount>3196</finalAmount><gift>false</gift><giftCardAmount>0</giftCardAmount><giftCharge>0</giftCharge><locality>Bommanahalli  &#x28;Bangalore&#x29;</locality><login>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</login><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><mobile>9439543863</mobile><mrpTotal>3196</mrpTotal><onHold>false</onHold><orderId>70042440</orderId><orderLines><orderLine><createdBy>8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R</createdBy><createdOn>2016-02-22T12:52:10+05:30</createdOn><id>52699591</id><lastModifiedOn>2016-02-22T12:52:28+05:30</lastModifiedOn><version>2</version><cartDiscount>0</cartDiscount><cashRedeemed>0</cashRedeemed><cashbackOffered>0</cashbackOffered><couponDiscount>0</couponDiscount><customizedMessage></customizedMessage><discount>0</discount><discountRuleId>0</discountRuleId><discountRuleRevId>0</discountRuleRevId><discountedProduct>false</discountedProduct><discountedQuantity>0</discountedQuantity><earnedCredit>0</earnedCredit><finalAmount>3196</finalAmount><fragile>false</fragile><giftCardAmount>0</giftCardAmount><govtTaxAmount>0</govtTaxAmount><govtTaxRate>5</govtTaxRate><hazMat>false</hazMat><isCustomizable>false</isCustomizable><isDiscountedProduct>false</isDiscountedProduct><isExchangeableProduct>true</isExchangeableProduct><isFragile>false</isFragile><isHazMat>false</isHazMat><isJewellery>false</isJewellery><isReturnableProduct>true</isReturnableProduct><jewellery>false</jewellery><loyaltyConversionFactor>0</loyaltyConversionFactor><loyaltyPointsAwarded>0</loyaltyPointsAwarded><loyaltyPointsCredit>0</loyaltyPointsCredit><loyaltyPointsUsed>0</loyaltyPointsUsed><optionId>4853</optionId><orderId>70042440</orderId><orderReleaseId>70042440</orderReleaseId><packagingStatus>NOT_PACKAGED</packagingStatus><packagingType>NORMAL</packagingType><pgDiscount>0</pgDiscount><poStatus>UNUSED</poStatus><quantity>4</quantity><sellerId>73</sellerId><skuId>3832</skuId><status>A</status><statusDisplayName>Assigned</statusDisplayName><storedCredit>0</storedCredit><styleId>1531</styleId><supplyType>ON_HAND</supplyType><taxAmount>0</taxAmount><taxRate>5</taxRate><unitPrice>799</unitPrice></orderLine></orderLines><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><personalized>false</personalized><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T12:52:15+05:30</queuedOn><receiverName>END2END Automation1 </receiverName><refunded>false</refunded><shippingCharge>0</shippingCharge><shippingMethod>NORMAL</shippingMethod><singleItemRelease>false</singleItemRelease><specialPincode>false</specialPincode><state>KA</state><status>Q</status><statusDisplayName>Queued</statusDisplayName><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><trackingNo></trackingNo><userContactNo>9439543863</userContactNo><warehouseId>1</warehouseId><zipcode>560068</zipcode></orderRelease></orderReleases><orderType>on</orderType><orderTypeDisplay>Online</orderTypeDisplay><paymentMethod>cod</paymentMethod><paymentMethodDisplay>Cash On Delivery</paymentMethodDisplay><paymentPpsId>ff505315-b8ae-4e8c-8b9d-1e95d917d6aa</paymentPpsId><pgDiscount>0</pgDiscount><queuedOn>2016-02-22T12:52:15+05:30</queuedOn><shippingCharge>0</shippingCharge><sellerId>73</sellerId><storeId>1</storeId><storedCredit>0</storedCredit><taxAmount>0</taxAmount><totalOrderValue>3196</totalOrderValue><userContactNo>9439543863</userContactNo></order>";

        String payment_Plan = "INSERT INTO `payment_plan` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `actionType`, `clientTransactionId`, `crmRefId`, `login`, `orderId`, `ppsType`, `sourceId`, `state`, `sessionId`, `cartContext`, `totalAmount`, `mobile`, `returnId`, `userAgent`, `clientIP`) VALUES ('ff505315-b8ae-4e8c-8b9d-1e95d917d6aa', 'PPS Plan created', 'SYSTEM', 1456125729796, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042440', 'ORDER', 'afc34fc3-8021-4b9e-9851-a2b5f9b62c31--s1', 'PPFSM Order Taking done', 'JJN004b6c25b74b21d432497435cc8590aef2a1456125658M', 'DEFAULT', 319600, NULL, NULL, NULL, '1.1.1.1'), ('96580401-cc6f-488c-95bc-a1f18a2eceaa', 'PPS Plan created', 'SYSTEM', 1456116362338, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042404', 'ORDER', '8b851045-56e4-4df9-9703-96ab6effdcb1--s1', 'PPFSM Order Taking done', 'JJN003a7fbdf0be4024db0bf76226b53a53bcc1456116289M', 'DEFAULT', 639200, NULL, NULL, NULL, '1.1.1.1'), ('7b74ebdc-4cf6-4da1-8d45-fa10025aee5e', 'PPS Plan created', 'SYSTEM', 1456116734346, 'SALE', NULL, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042406', 'ORDER', 'c52b8c8a-f837-4e8f-8ee7-51e0c12b3bd0--s1', 'PPFSM Order Taking done', 'JJN003bafce738bcea40b2a76906fb20c176a41456116663M', 'DEFAULT', 399500, NULL, NULL, NULL, '1.1.1.1'), ('248a657e-a90a-48d6-b895-beac2e4e259b', 'PPS Plan created', 'SYSTEM', 1456117338012, 'EXCHANGE', 'EXCHANGE70042406SKU38321456117337', NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '70042407', 'ORDER', '7b74ebdc-4cf6-4da1-8d45-fa10025aee5e', 'PPFSM Exchange done', NULL, NULL, NULL, NULL, NULL, NULL, NULL);";
        String payment_plan_item = "INSERT INTO `payment_plan_item` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `itemType`, `pricePerUnit`, `quantity`, `sellerId`, `skuId`, `pps_Id`) VALUES (99941466, 'Payment Plan Item created', 'SYSTEM', 1456116734533, 'SKU', 79900, 5, '1', '3832', '7b74ebdc-4cf6-4da1-8d45-fa10025aee5e'), (99941459, 'Payment Plan Item created', 'SYSTEM', 1456116362526, 'SKU', 79900, 8, '1', '3832', '96580401-cc6f-488c-95bc-a1f18a2eceaa'), (99941521, 'Payment Plan Item created', 'SYSTEM', 1456125729965, 'SKU', 79900, 4, '1', '3832', 'ff505315-b8ae-4e8c-8b9d-1e95d917d6aa');";
        String payment_plan_item_instrument = "INSERT INTO `payment_plan_item_instrument` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `amount`, `paymentInstrumentType`, `ppsItemId`, `actionType`) VALUES (29164, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456116734534, 399500, 5, 99941466, NULL), (29157, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456116362526, 639200, 5, 99941459, NULL), (29249, 'Payment Plan Item Instrument Detail created', 'SYSTEM', 1456125729966, 319600, 5, 99941521, NULL);";
        String payment_plan_instrument_Details = "INSERT INTO `payment_plan_instrument_details` (`id`, `comments`, `updatedBy`, `updatedTimestamp`, `paymentInstrumentType`, `totalPrice`, `pps_Id`, `paymentPlanExecutionStatus_id`, `actionType`, `parentInstrumentDetailId`) VALUES (20392, 'PPS Plan Instrument Details created', 'SYSTEM', 1456116734533, 5, 399500, '7b74ebdc-4cf6-4da1-8d45-fa10025aee5e', 9182747, 'DEBIT', NULL), (20386, 'PPS Plan Instrument Details created', 'SYSTEM', 1456116362525, 5, 639200, '96580401-cc6f-488c-95bc-a1f18a2eceaa', 9182741, 'DEBIT', NULL), (20444, 'PPS Plan Instrument Details created', 'SYSTEM', 1456125729965, 5, 319600, 'ff505315-b8ae-4e8c-8b9d-1e95d917d6aa', 9182794, 'DEBIT', NULL);";

        omsServiceHelper.deletePPSRecords(
                "'96580401-cc6f-488c-95bc-a1f18a2eceaa', '7b74ebdc-4cf6-4da1-8d45-fa10025aee5e', '248a657e-a90a-48d6-b895-beac2e4e259b','ff505315-b8ae-4e8c-8b9d-1e95d917d6aa', 'd146032d-3cf7-472c-b52f-ac9a0cd396fa'");
        omsServiceHelper.deleteOMSDBEntriesForOrderID("70042404, 70042406, 70042407, 70042440,70042270");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        omsServiceHelper.deleteOMSDBEntriesForLogin("'"+uidx+"'");

        DBUtilities.exUpdateQuery(payment_Plan, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item, "pps");
        DBUtilities.exUpdateQuery(payment_plan_item_instrument, "pps");
        DBUtilities.exUpdateQuery(payment_plan_instrument_Details, "pps");

        omsServiceHelper.createOrderInOMS(order_pps_70042404);
        omsServiceHelper.createOrderInOMS(order_pps_70042406);
        omsServiceHelper.createOrderInOMS(order_pps_70042407);
        omsServiceHelper.createOrderInOMS(order_pps_70042440);

        Object[][] dataSet = new Object[][] { { "70042440" } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }


/*
    @DataProvider(name = "validateOnHoldRuleForFraudUserPhoneDP")
    public static Object[][] validateOnHoldRuleForFraudUserPhoneDP(ITestContext testContext)
            throws Exception {
        ATSServiceHelper knightServiceHelper = new ATSServiceHelper();

        String[] skuId = {OMSTCConstants.OtherSkus.skuId_3831+":1"};
        String login = "fraudmobile@myntra.com";
        End2EndHelper end2EndHelper =  new End2EndHelper();
        knightServiceHelper.addMobileToFraudList("4343434343");
        long orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.AddressIds.ADDRESS1, skuId, "", false, false, false,"", false);

        Object[][] dataSet = new Object[][] { {orderID} };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 1, 1);
    }
*/


    @DataProvider(name = "verifyOnHoldResolveSequenceDP")
    public static Object[][] verifyOnHoldResolveSequenceDP(ITestContext testContext)
            throws SQLException, JAXBException, JsonParseException, JsonMappingException, IOException {
        // # Create Order in OMS DB
    	String orderID = "70041630";
    	String login = "end2endautomation1@gmail.com";
        String order_70041630 = "INSERT INTO `xcart_order_details` (`itemid`, `orderid`, `productid`, `price`, `amount`, `provider`, `product_options`, `extra_data`, `productcode`, `product`, `product_style`, `product_type`, `discount`, `discount_quantity`, `cart_discount_split_on_ratio`, `actual_product_price`, `quantity_breakup`, `item_status`, `assignee`, `location`, `assignment_time`, `completion_time`, `sent_date`, `tax_rate`, `taxamount`, `shipping_amount`, `shipping_tax`, `total_amount`, `tpl_used_id`, `promotion_id`, `style_template`, `estimated_processing_date`, `addonid`, `pos_unit_mrp`, `pos_total_amount`, `type_fulfillment_pos`, `is_customizable`, `coupon_code`, `coupon_discount_product`, `cashback`, `applied_discount_rule`, `applied_discount_algoid`, `applied_discount_data`, `canceltime`, `cash_redeemed`, `store_credit_usage`, `earned_credit_usage`, `cash_coupon_code`, `jit_purchase`, `pg_discount`, `qapass_items`, `cancellation_code`, `discount_rule_id`, `discount_rule_rev_id`, `is_discounted`, `is_returnable`, `is_exchangeable`, `difference_refund`, `item_loyalty_points_used`, `item_loyalty_points_awarded`, `seller_id`, `supply_type`, `packaging_type`, `is_packaged`, `govt_tax_rate`, `govt_tax_amount`, `gift_card_amount`, `sku_id`, `option_id`) VALUES (70056962, 70056780, 295681, 1299.00, 1, '', '', '', '', '', 295681, 379, 0.00, 0, 0.00, 1299.00, NULL, 'UA', NULL, NULL, NULL, NULL, NULL, 5.00, 0.00, NULL, NULL, 1299.00, 0, 0, NULL, 0, NULL, NULL, NULL, NULL, 0, '', 0.00, 0.00, NULL, NULL, NULL, NULL, 0.00, 0.00, 0.00, '', 0, 0.00, NULL, NULL, 0, 0, 0, 1, 1, 0.00, 0.00, 0.00, 1, 'ON_HAND', 'NORMAL', 0, 0.000, 0.00, 0.00, 987669, 990707);";
		String xcart_order = "INSERT INTO `xcart_orders` (`orderid`, `invoiceid`, `login`, `membership`, `total`, `giftcert_discount`, `giftcert_ids`, `subtotal`, `discount`, `cart_discount`, `ref_discount`, `coupon`, `coupon_discount`, `shippingid`, `tracking`, `shipping_cost`, `tax`, `taxes_applied`, `date`, `status`, `payment_method`, `flag`, `notes`, `details`, `customer_notes`, `customer`, `title`, `firstname`, `lastname`, `company`, `b_title`, `b_firstname`, `b_lastname`, `b_address`, `b_city`, `b_county`, `b_state`, `b_country`, `b_zipcode`, `b_mobile`, `b_email`, `s_title`, `s_firstname`, `s_lastname`, `s_address`, `s_city`, `s_county`, `s_state`, `s_country`, `s_zipcode`, `s_email`, `phone`, `fax`, `url`, `email`, `language`, `clickid`, `extra`, `membershipid`, `paymentid`, `payment_surcharge`, `tax_number`, `tax_exempt`, `shipping_method`, `qtyInOrder`, `mobile`, `ordertype`, `ccavenue`, `gift_status`, `gift_pack`, `gift_charges`, `affiliateid`, `cod`, `queueddate`, `completeddate`, `changerequest_status`, `corporate_request_id`, `quote_number`, `cheque_no`, `cheque_date`, `cheque_bounce`, `shopid`, `aff_discount`, `guid`, `aff_orderid`, `feedback_request`, `orgid`, `courier_service`, `shipment_preferences`, `issues_contact_number`, `additional_info`, `tf_status`, `order_name`, `source_id`, `operations_location`, `shop_bill_number`, `pos_customer_mrp`, `card_type`, `gateway`, `collected_amount`, `refund_amount`, `payment_method_pos`, `cod_pay_status`, `cod_payment_date`, `order_return_reason`, `parent_orderid`, `cashback`, `canceltime`, `cash_redeemed`, `store_credit_usage`, `earned_credit_usage`, `cash_coupon_code`, `pg_discount`, `warehouseid`, `shippeddate`, `delivereddate`, `cashback_processed`, `request_server`, `response_server`, `channel`, `cancellation_code`, `s_locality`, `on_hold_reason_id_fk`, `group_id`, `splitdate`, `packeddate`, `weight`, `is_refunded`, `loyalty_points_used`, `loyalty_points_awarded`, `loyalty_points_conversion_factor`, `gift_card_amount`, `pps_id`) VALUES (70041630, NULL, 'end2endautomation1@gmail.com', '', 2299.00, 0.00, '', 2299.00, 0.00, 0.00, 0.00, '', 0.00, 0, '', 0.00, 0.00, '', 1455476350, 'PP', 'cod', 'N', '', '', '', 'abhijit', '', 'abhijit', '', '', '', '', '', '', '', '', '', '', '', '4343434343', 'end2endautomation1@gmail.com', '', 'abhijit', '', 'bangalore', 'Bangalore', '', 'KA', 'India', '560068', 'end2endautomation1&#x40;gmail.com', '4343434343', '', '', 'end2endautomation1@gmail.com', 'US', 0, '', 0, 0, 0.00, '', '\0', 'NORMAL', NULL, '9439543863', 'on', NULL, 'N', 'N', 0.00, 0, 0.00, 1455476350, NULL, 'N', NULL, NULL, NULL, NULL, 'N', NULL, 0.00, '', 0, 'N', 0, '', NULL, '9439543863', '', 'NF', NULL, 1, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'pending', NULL, NULL, 70041630, NULL, NULL, 0.00, 0.00, 0.00, '', 0.00, NULL, NULL, NULL, 1, NULL, NULL, 'web', NULL, 'Hongasandra', NULL, 70041630, NULL, NULL, NULL, 0, 0.00, 0.00, 0.000, 0.00, NULL);";

		String xcart_order_detils = "INSERT INTO `xcart_order_details` (`itemid`, `orderid`, `productid`, `price`, `amount`, `provider`, `product_options`, `extra_data`, `productcode`, `product`, `product_style`, `product_type`, `discount`, `discount_quantity`, `cart_discount_split_on_ratio`, `actual_product_price`, `quantity_breakup`, `item_status`, `assignee`, `location`, `assignment_time`, `completion_time`, `sent_date`, `tax_rate`, `taxamount`, `shipping_amount`, `shipping_tax`, `total_amount`, `tpl_used_id`, `promotion_id`, `style_template`, `estimated_processing_date`, `addonid`, `pos_unit_mrp`, `pos_total_amount`, `type_fulfillment_pos`, `is_customizable`, `coupon_code`, `coupon_discount_product`, `cashback`, `applied_discount_rule`, `applied_discount_algoid`, `applied_discount_data`, `canceltime`, `cash_redeemed`, `store_credit_usage`, `earned_credit_usage`, `cash_coupon_code`, `jit_purchase`, `pg_discount`, `qapass_items`, `cancellation_code`, `discount_rule_id`, `discount_rule_rev_id`, `is_discounted`, `is_returnable`, `is_exchangeable`, `difference_refund`, `item_loyalty_points_used`, `item_loyalty_points_awarded`, `seller_id`, `supply_type`, `packaging_type`, `is_packaged`, `govt_tax_rate`, `govt_tax_amount`, `gift_card_amount`, `sku_id`, `option_id`) VALUES (70046125, 70041630, 53784, 2299.00, 1, '', '', '', '', '', 53784, 320, 0.00, 0, 0.00, 2299.00, NULL, 'UA', NULL, NULL, NULL, NULL, NULL, 5.50, 0.00, NULL, NULL, 2299.00, 0, 0, NULL, 0, NULL, NULL, NULL, NULL, 0, '', 0.00, 0.00, NULL, NULL, NULL, NULL, 0.00, 0.00, 0.00, '', 0, 0.00, NULL, NULL, 0, 0, 0, 1, 1, 0.00, 0.00, 0.00, 1, 'ON_HAND', 'NORMAL', 0, 0.000, 0.00, 0.00, 209214, 202965);";

		bountyServiceHelper.deleteBountyDBEntries(orderID);
		omsServiceHelper.deleteOMSDBEntriesForOrderID(""+orderID);
		omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(ideaApiHelper.getUIDXForLoginViaEmail("myntra", login), login);
		DBUtilities.exUpdateQuery(xcart_order,"order");
		DBUtilities.exUpdateQuery(xcart_order_detils,"order");
		bountyServiceHelper.pushOrderToOMS(orderID);
		String message = "<orderUpdateEntry><version>0</version><giftCardAmount>0.0</giftCardAmount><onHold>false</onHold><orderId>"+orderID+"</orderId><status>Q</status></orderUpdateEntry>";
		End2EndHelper end2EndHelper = new End2EndHelper();
		end2EndHelper.pushMessageToQueue(message,"orderConfirmedEvents","oms");
		end2EndHelper.sleep(1000L);
		Object[][] dataSet = new Object[][] { { orderID } };
		return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);

    }

    
	@DataProvider(name = "fraudUserONHoldOrderShouldFlowToWMSDP")
	public static Object[][] fraudUserONHoldOrderShouldFlowToWMSDP(ITestContext testContext)
            throws Exception {
        End2EndHelper end2EndHelper = new End2EndHelper();
        ATSServiceHelper knightServiceHelper = new ATSServiceHelper();
        String login = "fraudcustomer@myntra.com";
        String uidx = ideaApiHelper.getUIDXForLoginViaEmail("myntra", login);
        knightServiceHelper.addEmailToFraudList(login);
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx,login);
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560076, new String[] {OMSTCConstants.OtherSkus.skuId_3831 +":2"}, "", false, false, false, "", false);
        omsServiceHelper.checkReleaseStatusForOrder(orderID, "WP");
        Object[][] dataSet = new Object[][] { { orderID } };
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
	}

	@DataProvider(name = "duplicateOrderOnHoldRuleShouldGoToWPStatusDP")
	public static Object[][] duplicateOrderOnHoldRuleShouldGoToWPStatusDP(ITestContext testContext)
            throws Exception {
		updateOnHoldInOnholdReasonsMaster("35", 0);
		uidx = getUidxForLogin(login);
		ATSServiceHelper knightServiceHelper = new ATSServiceHelper();
		knightServiceHelper.setOutstandingCODLimitForLogin(uidx, "10000");
        omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx, login);
        End2EndHelper end2EndHelper = new End2EndHelper();
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560068, new String[] {OMSTCConstants.OtherSkus.skuId_3831 +":1"}, "", false, false, false, "", false);
        omsServiceHelper.checkReleaseStatusForOrder(orderID, "WP");
        End2EndHelper.sleep(15000L);
        String orderIDDup = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560068, new String[] {OMSTCConstants.OtherSkus.skuId_3831 +":1"}, "", false, false, false, "", false);
        omsServiceHelper.checkReleaseStatusForOrder(orderIDDup, "WP");
        Object[][] dataSet = new Object[][]{{orderIDDup}};
		return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
	}
	

	@DataProvider(name = "duplicateOrderOnHoldRuleShouldGoToWPStatusMultipleQuantityDP")
	public static Object[][] duplicateOrderOnHoldRuleShouldGoToWPStatusMultipleQuantityDP(ITestContext testContext)
            throws Exception {
		updateOnHoldInOnholdReasonsMaster("35", 0);
        End2EndHelper end2EndHelper = new End2EndHelper();
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560068, new String[] {OMSTCConstants.OtherSkus.skuId_3831 +":1", OMSTCConstants.OtherSkus.skuId_3832+":1"}, "", false, false, false, "", false);
        End2EndHelper.sleep(15000L);
        String orderIDDup = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560068, new String[] {OMSTCConstants.OtherSkus.skuId_3833+":1", OMSTCConstants.OtherSkus.skuId_3831 +":1"}, "", false, false, false, "", false);


        Object[][] dataSet = new Object[][]{{orderIDDup}};
		return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
	}

	@DataProvider(name = "validateOnHoldRuleForGiftOrderDP")
	public static Object[][] validateOnHoldRuleForGiftOrderDP(ITestContext testContext)
			throws SQLException, JAXBException, IOException {
        DBUtilities.exUpdateQuery("update wh_inventory set inventory_count=1000,blocked_order_count=0 where sku_id=3918 and warehouse_id=28;","myntra_ims");
        DBUtilities.exUpdateQuery("update wh_inventory set inventory_count=0,blocked_order_count=0 where sku_id=3918 and warehouse_id=36;","myntra_ims");
        DBUtilities.exUpdateQuery("update wh_inventory set inventory_count=10000,blocked_order_count=0 where sku_id=3917 and warehouse_id=36;","myntra_ims");
		// # Create Order in Bounty DB and Push Order to OMS
        String orderID = "70054322";
		String xcart_order = "INSERT INTO `xcart_orders` (`orderid`, `invoiceid`, `login`, `membership`, `total`, `giftcert_discount`, `giftcert_ids`, `subtotal`, `discount`, `cart_discount`, `ref_discount`, `coupon`, `coupon_discount`, `shippingid`, `tracking`, `shipping_cost`, `tax`, `taxes_applied`, `date`, `status`, `payment_method`, `flag`, `notes`, `details`, `customer_notes`, `customer`, `title`, `firstname`, `lastname`, `company`, `b_title`, `b_firstname`, `b_lastname`, `b_address`, `b_city`, `b_county`, `b_state`, `b_country`, `b_zipcode`, `b_mobile`, `b_email`, `s_title`, `s_firstname`, `s_lastname`, `s_address`, `s_city`, `s_county`, `s_state`, `s_country`, `s_zipcode`, `s_email`, `phone`, `fax`, `url`, `email`, `language`, `clickid`, `extra`, `membershipid`, `paymentid`, `payment_surcharge`, `tax_number`, `tax_exempt`, `shipping_method`, `qtyInOrder`, `mobile`, `ordertype`, `ccavenue`, `gift_status`, `gift_pack`, `gift_charges`, `affiliateid`, `cod`, `queueddate`, `completeddate`, `changerequest_status`, `corporate_request_id`, `quote_number`, `cheque_no`, `cheque_date`, `cheque_bounce`, `shopid`, `aff_discount`, `guid`, `aff_orderid`, `feedback_request`, `orgid`, `courier_service`, `shipment_preferences`, `issues_contact_number`, `additional_info`, `tf_status`, `order_name`, `source_id`, `operations_location`, `shop_bill_number`, `pos_customer_mrp`, `card_type`, `gateway`, `collected_amount`, `refund_amount`, `payment_method_pos`, `cod_pay_status`, `cod_payment_date`, `order_return_reason`, `parent_orderid`, `cashback`, `canceltime`, `cash_redeemed`, `store_credit_usage`, `earned_credit_usage`, `cash_coupon_code`, `pg_discount`, `warehouseid`, `shippeddate`, `delivereddate`, `cashback_processed`, `request_server`, `response_server`, `channel`, `cancellation_code`, `s_locality`, `on_hold_reason_id_fk`, `group_id`, `splitdate`, `packeddate`, `weight`, `is_refunded`, `loyalty_points_used`, `loyalty_points_awarded`, `loyalty_points_conversion_factor`, `gift_card_amount`, `pps_id`) VALUES (70054322, NULL, '8861d0a4.f190.4a91.b392.965c152b3914CLcZYByF9R', '', 251.00, 0.00, '', 448.00, 199.00, 0.00, 0.00, '', 0.00, 0, '', 2.00, 0.00, '', 1459868968, 'PP', 'cod', 'N', '', '', '', 'Abhijit Pati', '', 'Abhijit Pati', '', '', '', '', '', '', '', '', '', '', '', '2121212121', 'end2endautomation1@gmail.com', '', 'Abhijit Pati', '', 'Myntra Design Pvt. Ltd.', 'Bangalore', '', 'KA', 'India', '560068', 'end2endautomation1&#x40;gmail.com', '2121212121', '', '', 'end2endautomation1@gmail.com', 'US', 0, '', 0, 0, 0.00, '', '\0', 'NORMAL', NULL, '9439543863', 'on', NULL, 'N', 'N', 0.00, 0, 0.00, 1459868968, NULL, 'N', NULL, NULL, NULL, NULL, 'N', NULL, 0.00, '', 0, 'N', 0, '', NULL, '9439543863', '', 'NF', NULL, 1, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'pending', NULL, NULL, 70054322, NULL, NULL, 0.00, 0.00, 0.00, '', 0.00, NULL, NULL, NULL, 1, NULL, NULL, 'web', NULL, 'Begur', NULL, 70054322, NULL, NULL, NULL, 0, 0.00, 0.00, 0.000, 0.00, '39bb89f9-e79d-4c83-b725-2806b1c4a5e8');";
		String xcart_order_detils = "INSERT INTO `xcart_order_details` (`itemid`, `orderid`, `productid`, `price`, `amount`, `provider`, `product_options`, `extra_data`, `productcode`, `product`, `product_style`, `product_type`, `discount`, `discount_quantity`, `cart_discount_split_on_ratio`, `actual_product_price`, `quantity_breakup`, `item_status`, `assignee`, `location`, `assignment_time`, `completion_time`, `sent_date`, `tax_rate`, `taxamount`, `shipping_amount`, `shipping_tax`, `total_amount`, `tpl_used_id`, `promotion_id`, `style_template`, `estimated_processing_date`, `addonid`, `pos_unit_mrp`, `pos_total_amount`, `type_fulfillment_pos`, `is_customizable`, `coupon_code`, `coupon_discount_product`, `cashback`, `applied_discount_rule`, `applied_discount_algoid`, `applied_discount_data`, `canceltime`, `cash_redeemed`, `store_credit_usage`, `earned_credit_usage`, `cash_coupon_code`, `jit_purchase`, `pg_discount`, `qapass_items`, `cancellation_code`, `discount_rule_id`, `discount_rule_rev_id`, `is_discounted`, `is_returnable`, `is_exchangeable`, `difference_refund`, `item_loyalty_points_used`, `item_loyalty_points_awarded`, `seller_id`, `supply_type`, `packaging_type`, `is_packaged`, `govt_tax_rate`, `govt_tax_amount`, `gift_card_amount`, `sku_id`, `option_id`) VALUES (70054302, 70054322, 1554, 249.00, 1, '', '', '', '', '', 1554, 295, 0.00, 0, 0.00, 249.00, NULL, 'UA', NULL, NULL, NULL, NULL, NULL, 12.50, 0.00, NULL, NULL, 249.00, 0, 0, NULL, 0, NULL, NULL, NULL, NULL, 0, '', 0.00, 0.00, NULL, NULL, NULL, NULL, 0.00, 0.00, 0.00, '', 0, 0.00, NULL, NULL, 137453, 2729335, 0, 1, 1, 0.00, 0.00, 0.00, 1, 'ON_HAND', 'NORMAL', 0, 0.000, 0.00, 0.00, 3917, 4955), (70054303, 70054322, 1555, 199.00, 1, '', '', '', '', '', 1555, 295, 199.00, 1, 0.00, 199.00, NULL, 'UA', NULL, NULL, NULL, NULL, NULL, 12.50, 0.00, NULL, NULL, 0.00, 0, 0, NULL, 0, NULL, NULL, NULL, NULL, 0, '', 0.00, 0.00, NULL, NULL, NULL, NULL, 0.00, 0.00, 0.00, '', 0, 0.00, NULL, NULL, 137453, 2729335, 1, 1, 1, 0.00, 0.00, 0.00, 1, 'ON_HAND', 'NORMAL', 0, 0.000, 0.00, 0.00, 3918, 5075);";

		bountyServiceHelper.deleteBountyDBEntries(orderID);
		omsServiceHelper.deleteOMSDBEntriesForOrderID(""+orderID);
		omsServiceHelper.chnageOlderOrdersToOnlineForCODTesting(uidx,login);
		DBUtilities.exUpdateQuery(xcart_order,"order");
		DBUtilities.exUpdateQuery(xcart_order_detils,"order");	
		bountyServiceHelper.pushOrderToOMS(orderID);
		String message1 = "<orderUpdateEntry><version>0</version><giftCardAmount>0.0</giftCardAmount><onHold>false</onHold><orderId>"+orderID+"</orderId><status>Q</status></orderUpdateEntry>";
		End2EndHelper end2EndHelper = new End2EndHelper();
		end2EndHelper.pushMessageToQueue(message1,"orderConfirmedEvents","oms");
		end2EndHelper.sleep(10000L);
		Object[][] dataSet = new Object[][]{{orderID}};
		return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);

	}

    @DataProvider(name = "validateOnHoldRuleForOOSSkus")
    public static Object[][] validateOnHoldRuleForOOSSkus(ITestContext testContext)
            throws Exception {
        String[] skuId = {OMSTCConstants.OtherSkus.skuId_3919+":2"};
        imsServiceHelper.updateInventoryForSeller(new String[] {OMSTCConstants.OtherSkus.skuId_3919+":"+OMSTCConstants.WareHouseIds.warehouseId1_BA+":0:0:"+vectorSellerID },supplyTypeOnHand);
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_560068, skuId, "", false, false, false,"", false);
        end2EndHelper.sleep(10000);
        Object[][] dataSet = new Object[][]{{orderID}};
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "validateOnHoldRuleForPNS")
    public static Object[][] validateOnHoldRuleForPNS(ITestContext testContext)
            throws Exception {
        // # Create Order in Bounty DB and Push Order to OMS
        atpServiceHelper.updateInventoryDetailsForSeller(new String[]{OMSTCConstants.OtherSkus.skuId_8006+":1,36:100:0:"+vectorSellerID+":1"},supplyTypeOnHand);
        imsServiceHelper.updateInventoryForSeller(new String[] {OMSTCConstants.OtherSkus.skuId_8006+":"+OMSTCConstants.WareHouseIds.warehouseId1_BA+","+OMSTCConstants.WareHouseIds.warehouseId36_BW+","+OMSTCConstants.WareHouseIds.warehouseId28_GN+":10:0:"+vectorSellerID},supplyTypeOnHand);
        String[] skuId = {OMSTCConstants.OtherSkus.skuId_8006+":2"};
        End2EndHelper end2EndHelper =  new End2EndHelper();
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_123456, skuId, "", false, false, false,"", false);

        end2EndHelper.sleep(10000L);
        Object[][] dataSet = new Object[][]{{orderID}};
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }

    @DataProvider(name = "onHoldResolveSequenceDP")
    public static Object[][] onHoldResolveSequenceDP(ITestContext testContext)
            throws Exception {
        // # Create Order in Bounty DB and Push Order to OMS
    	atpServiceHelper.updateInventoryDetailsForSeller(new String[]{OMSTCConstants.OtherSkus.skuId_8006+":"+OMSTCConstants.WareHouseIds.warehouseId1_BA+","+OMSTCConstants.WareHouseIds.warehouseId28_GN+","+OMSTCConstants.WareHouseIds.warehouseId36_BW+":1000:0:"+vectorSellerID+":1"},supplyTypeOnHand);
        imsServiceHelper.updateInventoryForSeller(new String[] {OMSTCConstants.OtherSkus.skuId_8006+":"+OMSTCConstants.WareHouseIds.warehouseId28_GN+":0:0:"+vectorSellerID},supplyTypeOnHand );
        String[] skuId = {OMSTCConstants.OtherSkus.skuId_8006+":2"};
        End2EndHelper end2EndHelper =  new End2EndHelper();
        String orderID = end2EndHelper.createOrder(login, password, OMSTCConstants.Pincodes.PINCODE_123456, skuId, "", false, false, false,"", false);
        end2EndHelper.sleep(10000);
        Object[][] dataSet = new Object[][]{{orderID}};
        return Toolbox.returnReducedDataSet(dataSet, testContext.getIncludedGroups(), 11, 11);
    }
    
    /**
     * @param ids
     * @param isHold
     * @throws UnsupportedEncodingException
     * @throws JAXBException
     */
    public static void updateOnHoldInOnholdReasonsMaster(String ids, int isHold) throws UnsupportedEncodingException, JAXBException{
		DBUtilities.exUpdateQuery("UPDATE on_hold_reasons_master SET is_enabled="+isHold+" where id in ("+ids+");", "myntra_oms");
		omsServiceHelper.refreshOMSApplicationPropertyCache();
		omsServiceHelper.refreshOMSJVMCache();
	}


}
