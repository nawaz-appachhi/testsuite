<?xml version="1.0" encoding="UTF-8"?>
<configuration>
   <property name="DEFAULT_PATTERN" value="%d{ISO8601} %-5level %C{1} [%M:%L] [%thread] - %msg%n" />
   <timestamp key="bytime" datePattern="yyyy-MM-dd-HH-mm-ss" timeReference="contextBirth"/>
   <appender name="RootSiftAppender" class="ch.qos.logback.classic.sift.SiftingAppender">
      <discriminator>
         <Key>testname</Key>
         <DefaultValue>testrun</DefaultValue>
      </discriminator>
      <sift>
         <appender name="FILE-${threadName}" class="ch.qos.logback.core.rolling.RollingFileAppender">
            <File>logs/${testname}-${bytime}.log</File>
            <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
               <FileNamePattern>logs/${testname}-${bytime}.%i.log</FileNamePattern>
               <MinIndex>1</MinIndex>
               <MaxIndex>10</MaxIndex>
            </rollingPolicy>
            <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
               <MaxFileSize>5MB</MaxFileSize>
            </triggeringPolicy>
            <layout class="ch.qos.logback.classic.PatternLayout">
               <Pattern>${DEFAULT_PATTERN}</Pattern>
            </layout>
         </appender>
      </sift>
   </appender>

   <appender name="RootConsoleAppender" class="ch.qos.logback.core.ConsoleAppender">
      <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
         <pattern>${DEFAULT_PATTERN}</pattern>
      </encoder>
   </appender>
   
   <!-- Suppress Reflections DEBUG logging -->
   <logger name="org.reflections.Reflections"  level="INFO"/>

   <root level="INFO">
   	  <appender-ref ref="RootSiftAppender" />
      <appender-ref ref="RootConsoleAppender" />
   </root>
</configuration>
